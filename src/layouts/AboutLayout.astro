---
import { SITE } from "@config";
import Breadcrumbs from "@components/Breadcrumbs.astro";
import Footer from "@components/Footer.astro";
import Header from "@components/Header.astro";
import Layout from "./Layout.astro";
import { Image } from "astro:assets";

export interface Props {
  frontmatter: {
    title: string;
    description?: string;
    image?: ImageMetadata;
    connections?: {
      title: string;
      url: string;
      icon?: string;
    }[];
  };
}

const { frontmatter } = Astro.props;
---

<Layout title={`${frontmatter.title} | ${SITE.title}`}>
  <Header activeNav="about" />
  <Breadcrumbs />
  <main id="main-content">
    <section id="about" class="prose mb-28 max-w-5xl prose-img:border-0">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="flex-1">
          <h1 class="text-2xl tracking-wider sm:text-3xl">{frontmatter.title}</h1>
          <slot />
        </div>
        {frontmatter.image && (
          <div class="md:w-1/3">
            <Image
              src={frontmatter.image}
              alt="Dylan Burkey"
              class="rounded-lg shadow-lg w-full object-cover aspect-square"
              width={400}
              height={400}
              format="webp"
              quality={80}
            />
            {frontmatter.connections && (
              <div class="mt-6 bg-skin-card rounded-lg p-4">
                <h2 class="text-xl font-semibold mb-4">Connect with me</h2>
                <ul class="space-y-2">
                  {frontmatter.connections.map(connection => (
                    <li>
                      <a
                        href={connection.url}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="flex items-center gap-2 text-skin-accent hover:text-skin-accent-hover"
                      >
                        {connection.icon && <span class={connection.icon} />}
                        {connection.title}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </div>
        )}
      </div>
    </section>
  </main>
  <Footer />
</Layout>
